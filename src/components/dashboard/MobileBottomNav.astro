---
// Mobile Bottom Navigation - Only visible on mobile devices
---

<nav
    class="md:hidden fixed bottom-0 left-0 right-0 bg-[var(--color-bg-card)] border-t border-[var(--color-border)] z-50 safe-area-inset-bottom"
>
    <div class="flex items-center justify-around h-16 px-2">
        <!-- Dashboard -->
        <a
            href="/"
            class="flex flex-col items-center justify-center flex-1 py-2 text-gray-500 hover:text-[var(--color-brand)] transition-colors group"
            aria-label="Dashboard"
        >
            <svg
                class="w-6 h-6 mb-1"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                ></path>
            </svg>
            <span class="text-xs font-medium">Inicio</span>
        </a>

        <!-- Horario Personal -->
        <a
            href="/horario-personal"
            class="flex flex-col items-center justify-center flex-1 py-2 text-gray-500 hover:text-[var(--color-brand)] transition-colors group"
            aria-label="Horario Personal"
        >
            <svg
                class="w-6 h-6 mb-1"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                ></path>
            </svg>
            <span class="text-xs font-medium">Horario</span>
        </a>

        <!-- Personalizados -->
        <a
            href="/personalizados"
            class="flex flex-col items-center justify-center flex-1 py-2 text-gray-500 hover:text-[var(--color-brand)] transition-colors group"
            aria-label="Personalizados"
        >
            <svg
                class="w-6 h-6 mb-1"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <span class="text-xs font-medium">Buscar</span>
        </a>

        <!-- Profile / Login -->
        <button
            id="mobile-profile-btn"
            class="flex flex-col items-center justify-center flex-1 py-2 text-gray-500 hover:text-[var(--color-brand)] transition-colors group"
            aria-label="Perfil"
        >
            <svg
                class="w-6 h-6 mb-1"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                ></path>
            </svg>
            <span class="text-xs font-medium">Perfil</span>
        </button>
    </div>
</nav>

<script>
    // Mobile profile button - trigger login modal or user menu
    document.addEventListener("DOMContentLoaded", () => {
        const mobileProfileBtn = document.getElementById("mobile-profile-btn");

        mobileProfileBtn?.addEventListener("click", () => {
            // Check if user is logged in
            const userStr = localStorage.getItem("horarios_session");
            const parsed = userStr ? JSON.parse(userStr) : null;
            const user = parsed?.user || parsed;

            if (user) {
                // Show logout option (could be a modal or redirect)
                const confirmed = confirm(
                    `${user.nombre}\n\n¿Deseas cerrar sesión?`,
                );
                if (confirmed) {
                    localStorage.removeItem("horarios_session");
                    sessionStorage.removeItem("post_login_redirect");
                    window.location.href = "/";
                }
            } else {
                // Trigger login modal
                window.dispatchEvent(new CustomEvent("open-login-modal"));
            }
        });
    });
</script>

<style>
    /* Safe area for devices with notches */
    .safe-area-inset-bottom {
        padding-bottom: env(safe-area-inset-bottom);
    }
</style>
